<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>创建商品</title>
    <script src="static/assets/global/plugins/jquery-1.11.0.min.js"></script>
</head>
<body>
    <div>
        <h3>创建商品</h3>
        <div>
            <label>商品名称</label>
            <input type="text"  name="title" id="title"/>
        </div>
		<div>
            <label>商品描述</label>
            <input type="text" name="description" id="description"/>
        </div>
		<div>
            <label>商品价格</label>
            <input type="text" name="price" id="price"/>
        </div>
		<div>
            <label>商品图片</label>
            <input type="text" name="imgUrl" id="imgUrl"/>
        </div>
        <div>
            <label>商品库存</label>
            <input type="text" name="stock" id="stock"/>
        </div>	
		<div>
		    <input type="submit" style="display: block;width: 100px;margin: 5px 0 0 100px"
             id="create" value="提交创建">	
		</div>
    </div>

    <script>
        jQuery(document).ready(function () {
            //将按钮绑定点击事件，用于向后端发送获取手机验证码的请求
            $("#create").on("click",function () {
                let title = $("#title").val();
				let description = $("#description").val();
				let price = $("#price").val();
				let imgUrl = $("#imgUrl").val();
				let stock = $("#stock").val();
				
                if(null == title || title.length === 0){
                    alert("商品名称不能为空");
                    return false;
                }
                if(null == description || description.length === 0){
                    alert("商品描述不能为空");
                    return false;
                }
                if(null == price || price === ""){
                    alert("商品价格不能为空");
                    return false;
                }
                if(null == imgUrl || imgUrl === ""){
                    alert("商品图片不能为空");
                    return false;
                }
                if(null == stock || stock === ""){
                    alert("商品库存不能为空");
                    return false;
                }	
				
               $.ajax({
                   type:'POST',
                   contentType:'application/x-www-form-urlencoded',
                   url:'http://localhost:8090/item/createItem',

                   data:{
                       'title':title,
					   'description':description,
					   'price':price,
					   'imgUrl':imgUrl,
					   'stock':stock
                   },
				   xhrFields:{withCredentials:true},
                //两个回调函数，分为成功和失败两种情况
                   success:function (data) {
                        if("success" == data.status){
                            alert("商品创建成功");  
                        }else{
						alert("exception");
							alert("商品创建失败，原因为："+data.data.errMsg);
						}
                    },
                   error:function (data) {
						alert("error");
                       alert("商品创建失败，原因为："+data.responseText);
                   },
               });
			   return false;
            });
        });
    </script>
</body>
</html>